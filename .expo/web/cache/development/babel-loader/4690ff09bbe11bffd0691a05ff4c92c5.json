{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport AsyncStorage from '@react-native-community/async-storage';\n\nvar Auth = function () {\n  function Auth() {\n    _classCallCheck(this, Auth);\n  }\n\n  _createClass(Auth, [{\n    key: \"getAuth\",\n    value: function getAuth() {\n      var authJson;\n      return _regeneratorRuntime.async(function getAuth$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('auth'));\n\n            case 3:\n              authJson = _context.sent;\n              return _context.abrupt(\"return\", authJson != null ? JSON.parse(authJson) : null);\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              throw _context.t0;\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    }\n  }, {\n    key: \"getToken\",\n    value: function getToken() {\n      return _regeneratorRuntime.async(function getToken$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(this.getAuth().token);\n\n            case 2:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"getUserId\",\n    value: function getUserId() {\n      return _regeneratorRuntime.async(function getUserId$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.t0 = console;\n              _context3.next = 3;\n              return _regeneratorRuntime.awrap(this.getAuth());\n\n            case 3:\n              _context3.t1 = _context3.sent;\n\n              _context3.t0.log.call(_context3.t0, \"this.getAuth().user_id\", _context3.t1);\n\n              return _context3.abrupt(\"return\", this.getAuth().then(function (item) {\n                if (item) {\n                  return item.user_id;\n                }\n              }));\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"setUserToken\",\n    value: function setUserToken(new_token) {\n      var tokenJson;\n      return _regeneratorRuntime.async(function setUserToken$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              tokenJson = JSON.stringify(new_token);\n              localStorage.setItem('auth', tokenJson);\n              _context4.next = 5;\n              return _regeneratorRuntime.awrap(AsyncStorage.setItem('auth', tokenJson));\n\n            case 5:\n              _context4.next = 10;\n              break;\n\n            case 7:\n              _context4.prev = 7;\n              _context4.t0 = _context4[\"catch\"](0);\n              throw _context4.t0;\n\n            case 10:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      return _regeneratorRuntime.async(function logout$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.prev = 0;\n              localStorage.removeItem('auth');\n              _context5.next = 4;\n              return _regeneratorRuntime.awrap(AsyncStorage.removeItem('auth'));\n\n            case 4:\n              _context5.next = 6;\n              return _regeneratorRuntime.awrap(AsyncStorage.removeItem('userToken'));\n\n            case 6:\n              _context5.next = 11;\n              break;\n\n            case 8:\n              _context5.prev = 8;\n              _context5.t0 = _context5[\"catch\"](0);\n              throw _context5.t0;\n\n            case 11:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, [[0, 8]], Promise);\n    }\n  }]);\n\n  return Auth;\n}();\n\nexport default new Auth();","map":{"version":3,"sources":["D:/WS/reactws/ReactNativeEcommerce/src/modules/Auth/index.js"],"names":["AsyncStorage","Auth","getItem","authJson","JSON","parse","getAuth","token","console","log","then","item","user_id","new_token","tokenJson","stringify","localStorage","setItem","removeItem"],"mappings":";;;AAAA,OAAOA,YAAP,MAAyB,uCAAzB;;IAEMC,I;AACJ,kBAAc;AAAA;AAEb;;;;;;;;;;;;+CAG0BD,YAAY,CAACE,OAAb,CAAqB,MAArB,C;;;AAAjBC,cAAAA,Q;+CACCA,QAAQ,IAAI,IAAZ,GAAmBC,IAAI,CAACC,KAAL,CAAWF,QAAX,CAAnB,GAA0C,I;;;;;;;;;;;;;;;;;;;;;;+CAOtC,KAAKG,OAAL,GAAeC,K;;;;;;;;;;;;;;;;;;;6BAI5BC,O;;+CAA4C,KAAKF,OAAL,E;;;;;2BAApCG,G,oBAAI,wB;;gDACL,KAAKH,OAAL,GAAeI,IAAf,CAAoB,UAACC,IAAD,EAAU;AACnC,oBAAIA,IAAJ,EAAU;AACR,yBAAOA,IAAI,CAACC,OAAZ;AACD;AACF,eAJM,C;;;;;;;;;;;iCAOUC,S;;;;;;;AAETC,cAAAA,S,GAAYV,IAAI,CAACW,SAAL,CAAeF,SAAf,C;AAClBG,cAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BH,SAA7B;;+CACMd,YAAY,CAACiB,OAAb,CAAqB,MAArB,EAA6BH,SAA7B,C;;;;;;;;;;;;;;;;;;;;;;;;;;AAONE,cAAAA,YAAY,CAACE,UAAb,CAAwB,MAAxB;;+CACMlB,YAAY,CAACkB,UAAb,CAAwB,MAAxB,C;;;;+CACAlB,YAAY,CAACkB,UAAb,CAAwB,WAAxB,C;;;;;;;;;;;;;;;;;;;;;;;AAMZ,eAAe,IAAIjB,IAAJ,EAAf","sourcesContent":["import AsyncStorage from '@react-native-community/async-storage';\r\n\r\nclass Auth {\r\n  constructor() {\r\n    // this.user_token = JSON.parse(localStorage.getItem('auth'))||{}\r\n  }\r\n  async getAuth() {\r\n    try {\r\n      const authJson = await AsyncStorage.getItem('auth')\r\n      return authJson != null ? JSON.parse(authJson) : null\r\n    } catch (e) {\r\n      throw e;\r\n    }\r\n  }\r\n\r\n  async getToken() {\r\n    return await this.getAuth().token;\r\n  }\r\n\r\n  async getUserId() {\r\n    console.log(\"this.getAuth().user_id\", await this.getAuth())\r\n    return this.getAuth().then((item) => {\r\n      if (item) {\r\n        return item.user_id\r\n      }\r\n    });\r\n    // return this.user_token.user_id\r\n  }\r\n  async setUserToken(new_token) {\r\n    try {\r\n      const tokenJson = JSON.stringify(new_token)\r\n      localStorage.setItem('auth', tokenJson)\r\n      await AsyncStorage.setItem('auth', tokenJson)\r\n    } catch (e) {\r\n      throw e;\r\n    }\r\n  }\r\n  async logout() {\r\n    try {\r\n      localStorage.removeItem('auth')\r\n      await AsyncStorage.removeItem('auth')\r\n      await AsyncStorage.removeItem('userToken');\r\n    } catch (e) {\r\n      throw e;\r\n    }\r\n  }\r\n}\r\nexport default new Auth()"]},"metadata":{},"sourceType":"module"}