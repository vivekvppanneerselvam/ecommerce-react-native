{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\WS\\\\reactws\\\\ReactNativeEcommerce\\\\src\\\\views\\\\OrderInfo.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { Map } from 'immutable';\nimport { connect } from 'react-redux';\nimport { trackSelectedOrder, getSelectedOrderAddress, getCartById, updateOrder } from \"./action\";\nimport { getCheckoutUrl } from \"../../redux/action/checkoutAction\";\nimport Review from \"../payment/component/review\";\nimport calcPrice from \"../../components/calcPrice\";\nimport Confirmation from \"../../components/confirmation\";\nvar arr = [{\n  key: -1,\n  value: 'New'\n}, {\n  key: 0,\n  value: 'Confirmed Order'\n}, {\n  key: 1,\n  value: 'Processing Order'\n}, {\n  key: 2,\n  value: 'Quality Check'\n}, {\n  key: 3,\n  value: 'Product Dispatched'\n}, {\n  key: 4,\n  value: 'Product Delivered'\n}];\n\nfunction OrderInfo(props) {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      order = _useState2[0],\n      setOrder = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      cart = _useState4[0],\n      setCart = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      address = _useState6[0],\n      setAddress = _useState6[1];\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      comment = _useState8[0],\n      setComment = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      confirmationFlg = _useState10[0],\n      setConfirmationFlg = _useState10[1];\n\n  console.log(props.match.params.id);\n  useEffect(function () {\n    props.trackSelectedOrder(props.match.params.id);\n  }, []);\n  useEffect(function () {\n    if (!props.track_order_loading) {\n      if (!props.track_order.toJS().error) {\n        Object.keys(props.track_order.toJS().data[0]).map(function (key) {\n          setOrder(function (prevState) {\n            prevState[key] = props.track_order.toJS().data[0][key];\n            return _objectSpread({}, prevState);\n          });\n        });\n        props.getCartById(props.track_order.toJS().data[0].cartId);\n        props.getSelectedOrderAddress(props.track_order.toJS().data[0].addressId);\n      }\n    }\n  }, [props.track_order_loading]);\n  useEffect(function () {\n    if (!props.cart_loading) {\n      if (!props.cart.toJS().error) {\n        Object.keys(props.cart.toJS().data).map(function (key) {\n          setCart(function (prevState) {\n            prevState[key] = props.cart.toJS().data[key];\n            return _objectSpread({}, prevState);\n          });\n        });\n      }\n    }\n  }, [props.cart_loading]);\n  useEffect(function () {\n    if (!props.address_by_id_loading) {\n      if (!props.address_by_id.toJS().error) {\n        Object.keys(props.address_by_id.toJS().data[0]).map(function (key) {\n          setAddress(function (prevState) {\n            prevState[key] = props.address_by_id.toJS().data[0][key];\n            return _objectSpread({}, prevState);\n          });\n        });\n      }\n    }\n  }, [props.address_by_id_loading]);\n  useEffect(function () {\n    if (!props.update_order_loading) {\n      if (!props.update_order.toJS().error) {\n        alert(\"Order updated successfully.\");\n        setComment('');\n      } else {\n        alert(\"Error while updating order.\");\n      }\n    }\n  }, [props.update_order_loading]);\n\n  var onChangeHandler = function onChangeHandler(e) {\n    var id = e.target.id,\n        value = e.target.value;\n\n    if (value) {\n      setOrder(function (prevState) {\n        prevState[id] = value;\n        return _objectSpread({}, prevState);\n      });\n    }\n  };\n\n  function updateOrderStatus() {\n    if (order) {\n      props.updateOrder(order);\n    }\n  }\n\n  function cancelOrder() {\n    setConfirmationFlg(true);\n  }\n\n  function postComment() {\n    if (order && comment) {\n      setOrder(function (prevState) {\n        var commentsArr = prevState.comments;\n        prevState.comments = commentsArr.push(comment);\n        return _objectSpread({}, prevState);\n      });\n      props.updateOrder(order);\n    }\n  }\n\n  function confirmationHandler() {\n    if (order) {\n      setOrder(function (prevState) {\n        prevState.orderLevel = 5;\n        return _objectSpread({}, prevState);\n      });\n      props.updateOrder(order);\n    }\n  }\n\n  function closeHandler() {\n    setConfirmationFlg(false);\n  }\n\n  console.log(props.user);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 14\n    }\n  }), confirmationFlg && React.createElement(Confirmation, {\n    showModal: confirmationFlg,\n    handleClose: function handleClose(e) {\n      return closeHandler();\n    },\n    handleConfirmationMessage: function handleConfirmationMessage(e) {\n      return confirmationHandler(e);\n    },\n    title: 'Confirmation',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 33\n    }\n  }, \" \", React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, \"Are you sure you want to cancel the order\")), React.createElement(\"div\", {\n    className: \"jumbotron\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, props.user.hasOwnProperty('admin') ? props.user.admin && React.createElement(\"div\", {\n    className: 'row pull-right',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 45\n    }\n  }, React.createElement(\"div\", {\n    className: 'col-md-10',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 29\n    }\n  }, \" \", React.createElement(\"select\", {\n    className: 'form-control rounded-0',\n    id: 'orderLevel',\n    value: order && order.orderLevel,\n    onChange: function onChange(e) {\n      return onChangeHandler(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 59\n    }\n  }, React.createElement(\"option\", {\n    value: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 33\n    }\n  }, \"Select\"), arr.map(function (item) {\n    return React.createElement(\"option\", {\n      value: item.key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 50\n      }\n    }, item.value);\n  }))), \" \", React.createElement(\"div\", {\n    className: 'col-md-2',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 45\n    }\n  }, React.createElement(\"button\", {\n    className: 'btn btn-danger btn-sm rounded-0',\n    onClick: function onClick() {\n      return updateOrderStatus();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 33\n    }\n  }, \"Save\"))) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 27\n    }\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 21\n    }\n  }), React.createElement(\"div\", {\n    className: 'row',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 21\n    }\n  }, React.createElement(\"div\", {\n    className: 'col-md-6',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 25\n    }\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 29\n    }\n  }, \"User Information\"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 54\n    }\n  }), React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 29\n    }\n  }, React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 37\n    }\n  }, \"Name:\"), \" \", props.user && props.user.user_name), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 37\n    }\n  }, \"Email :\"), props.user && props.user.email)), React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 29\n    }\n  }, \"Order Details\"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 51\n    }\n  }), React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 29\n    }\n  }, React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 37\n    }\n  }, \"Priority:\"), \" \", order && order.priority), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 37\n    }\n  }, \"Total Amount :\"), order && order.totalAmount), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 37\n    }\n  }, \"Payment Method :\"), order && order.paymentMethod), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 37\n    }\n  }, \"Payment Status :\"), order && order.paymentStatus ? 'Done' : 'In Complete'), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 37\n    }\n  }, \"Order Process :\"), order && arr.filter(function (item) {\n    return item.key === order.orderLevel;\n  }).map(function (item) {\n    return item.value;\n  })[0]))), React.createElement(\"div\", {\n    className: 'col-md-6',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 25\n    }\n  }, React.createElement(\"h4\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 29\n    }\n  }, \"Address Information\"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 57\n    }\n  }), React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 29\n    }\n  }, React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 37\n    }\n  }, \"Address 1:\"), \" \", address && address.address1), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 37\n    }\n  }, \"Address 2 :\"), address && address.address2), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 37\n    }\n  }, \"City :\"), address && address.city, \" Pincode:\", address && address.pincode, \" \"), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 37\n    }\n  }, \"State :\"), address && address.state), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 37\n    }\n  }, \"Land Mark :\"), address && address.landMark), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 37\n    }\n  }, \"Phone No :\"), address && address.phoneNo), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 33\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 37\n    }\n  }, \"Address Type :\"), address && address.addressType)))), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 21\n    }\n  }, React.createElement(\"div\", {\n    className: 'col-md-6',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 42\n    }\n  }, React.createElement(Review, {\n    cart: cart,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 70\n    }\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 92\n    }\n  })), React.createElement(\"div\", {\n    className: 'col-md-6',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }, \" \", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 54\n    }\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 60\n    }\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 66\n    }\n  }), React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 72\n    }\n  }, React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 29\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 33\n    }\n  }, \"Total Quatity :\"), cart && cart.totalQty), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 29\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 33\n    }\n  }, \"Sub Total:\"), \"Rs. \", cart && cart.totalPrice), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 29\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 33\n    }\n  }, \"Delivery Charges :\"), 'Free'), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 29\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 33\n    }\n  }, \"Estimated tax :\"), \"Rs. \", calcPrice(cart.totalPrice).taxes), React.createElement(\"li\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 29\n    }\n  }, React.createElement(\"strong\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 33\n    }\n  }, \"Total :\"), \"Rs. \", calcPrice(cart.totalPrice).total)))), React.createElement(\"div\", {\n    className: 'row ',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }, React.createElement(\"div\", {\n    className: 'col-6 ',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 25\n    }\n  }, React.createElement(\"textarea\", {\n    className: 'form-control rounded-0',\n    value: comment,\n    onChange: function onChange(e) {\n      return setComment(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 29\n    }\n  }), React.createElement(\"button\", {\n    className: 'btn btn-danger rounded-0 btn-sm',\n    onClick: function onClick() {\n      return postComment();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 29\n    }\n  }, \"Post\")), React.createElement(\"div\", {\n    className: \"col-6 pull-right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 25\n    }\n  }, React.createElement(\"button\", {\n    className: 'btn btn-danger rounded-0 btn-sm',\n    onClick: function onClick() {\n      return cancelOrder();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 29\n    }\n  }, \"Cancel Order\"))))));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    track_order_loading: state.TrackOrdersReducer.getIn(['track_order', 'loading'], true),\n    track_order: state.TrackOrdersReducer.getIn(['track_order'], Map),\n    address_by_id_loading: state.TrackOrdersReducer.getIn(['address_by_id', 'loading'], true),\n    address_by_id: state.TrackOrdersReducer.getIn(['address_by_id'], Map),\n    cart_loading: state.TrackOrdersReducer.getIn(['cart_by_id', 'loading'], true),\n    cart: state.TrackOrdersReducer.getIn(['cart_by_id'], Map),\n    update_order_loading: state.TrackOrdersReducer.getIn(['update_order', 'loading'], true),\n    update_order: state.TrackOrdersReducer.getIn(['update_order'], Map),\n    user: state.token.user_token\n  };\n};\n\nexport default connect(mapStateToProps, {\n  trackSelectedOrder: trackSelectedOrder,\n  getSelectedOrderAddress: getSelectedOrderAddress,\n  getCartById: getCartById,\n  updateOrder: updateOrder\n})(OrderInfo);","map":{"version":3,"sources":["D:/WS/reactws/ReactNativeEcommerce/src/views/OrderInfo.js"],"names":["React","useState","useEffect","Map","connect","trackSelectedOrder","getSelectedOrderAddress","getCartById","updateOrder","getCheckoutUrl","Review","calcPrice","Confirmation","arr","key","value","OrderInfo","props","order","setOrder","cart","setCart","address","setAddress","comment","setComment","confirmationFlg","setConfirmationFlg","console","log","match","params","id","track_order_loading","track_order","toJS","error","Object","keys","data","map","prevState","cartId","addressId","cart_loading","address_by_id_loading","address_by_id","update_order_loading","update_order","alert","onChangeHandler","e","target","updateOrderStatus","cancelOrder","postComment","commentsArr","comments","push","confirmationHandler","orderLevel","closeHandler","user","hasOwnProperty","admin","item","user_name","email","priority","totalAmount","paymentMethod","paymentStatus","filter","address1","address2","city","pincode","state","landMark","phoneNo","addressType","totalQty","totalPrice","taxes","total","mapStateToProps","TrackOrdersReducer","getIn","token","user_token"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { Map } from 'immutable'\r\nimport { connect } from 'react-redux'\r\nimport { trackSelectedOrder, getSelectedOrderAddress, getCartById, updateOrder } from './action'\r\nimport { getCheckoutUrl } from '../../redux/action/checkoutAction'\r\nimport Review from '../payment/component/review';\r\nimport calcPrice from '../../components/calcPrice'\r\nimport Confirmation from '../../components/confirmation'\r\n\r\nlet arr = [{ key: -1, value: 'New' },\r\n{ key: 0, value: 'Confirmed Order' },\r\n{ key: 1, value: 'Processing Order' },\r\n{ key: 2, value: 'Quality Check' },\r\n{ key: 3, value: 'Product Dispatched' },\r\n{ key: 4, value: 'Product Delivered' }\r\n]\r\nfunction OrderInfo(props) {\r\n    const [order, setOrder] = useState({})\r\n    const [cart, setCart] = useState({})\r\n    const [address, setAddress] = useState({})\r\n    const [comment, setComment] = useState('')\r\n    const [confirmationFlg, setConfirmationFlg] = useState(false)\r\n    console.log(props.match.params.id)\r\n    useEffect(() => {\r\n        props.trackSelectedOrder(props.match.params.id)\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (!props.track_order_loading) {\r\n            if (!props.track_order.toJS().error) {\r\n                Object.keys(props.track_order.toJS().data[0]).map(key => {\r\n                    setOrder(prevState => {\r\n                        prevState[key] = props.track_order.toJS().data[0][key]\r\n                        return ({ ...prevState })\r\n                    })\r\n                })\r\n                props.getCartById(props.track_order.toJS().data[0].cartId)\r\n                props.getSelectedOrderAddress(props.track_order.toJS().data[0].addressId)\r\n            }\r\n        }\r\n    }, [props.track_order_loading])\r\n\r\n    useEffect(() => {\r\n        if (!props.cart_loading) {\r\n            if (!props.cart.toJS().error) {\r\n                Object.keys(props.cart.toJS().data).map(key => {\r\n                    setCart(prevState => {\r\n                        prevState[key] = props.cart.toJS().data[key]\r\n                        return ({ ...prevState })\r\n                    })\r\n                })\r\n            }\r\n        }\r\n    }, [props.cart_loading])\r\n\r\n    useEffect(() => {\r\n        if (!props.address_by_id_loading) {\r\n            if (!props.address_by_id.toJS().error) {\r\n                Object.keys(props.address_by_id.toJS().data[0]).map(key => {\r\n                    setAddress(prevState => {\r\n                        prevState[key] = props.address_by_id.toJS().data[0][key]\r\n                        return ({ ...prevState })\r\n                    })\r\n                })\r\n            }\r\n        }\r\n    }, [props.address_by_id_loading])\r\n\r\n    useEffect(() => {\r\n        if (!props.update_order_loading) {\r\n            if (!props.update_order.toJS().error) {\r\n                alert(\"Order updated successfully.\")\r\n                setComment('')\r\n            } else {\r\n                alert(\"Error while updating order.\")\r\n            }\r\n        }\r\n    }, [props.update_order_loading])\r\n\r\n    const onChangeHandler = (e) => {\r\n        let id = e.target.id, value = e.target.value\r\n        if (value) {\r\n            setOrder(prevState => {\r\n                prevState[id] = value\r\n                return ({ ...prevState })\r\n            })\r\n        }\r\n    }\r\n    function updateOrderStatus() {\r\n        if (order) {\r\n            props.updateOrder(order)\r\n        }\r\n    }\r\n\r\n    function cancelOrder() {\r\n        setConfirmationFlg(true)\r\n\r\n    }\r\n\r\n    function postComment() {\r\n        if (order && comment) {\r\n            setOrder(prevState => {\r\n                let commentsArr = prevState.comments\r\n                prevState.comments = commentsArr.push(comment)\r\n                return ({ ...prevState })\r\n            })\r\n            props.updateOrder(order)\r\n        }\r\n    }\r\n\r\n    function confirmationHandler() {\r\n        if (order) {\r\n            setOrder(prevState => {\r\n                prevState.orderLevel = 5\r\n                return ({ ...prevState })\r\n            })\r\n            props.updateOrder(order)\r\n        }\r\n    }\r\n\r\n    function closeHandler() {\r\n        setConfirmationFlg(false)\r\n    }\r\n\r\n    console.log(props.user)\r\n    return (\r\n        <div><br />\r\n            {confirmationFlg && <Confirmation\r\n                showModal={confirmationFlg}\r\n                handleClose={(e) => closeHandler()}\r\n                handleConfirmationMessage={(e) => confirmationHandler(e)}\r\n                title={'Confirmation'}\r\n            > <span>Are you sure you want to cancel the order</span>\r\n\r\n            </Confirmation>}\r\n            <div className=\"jumbotron\">\r\n                <div className=\"container\">\r\n                    {props.user.hasOwnProperty('admin') ?\r\n                        props.user.admin && <div className={'row pull-right'}>\r\n                            <div className={'col-md-10'}> <select className={'form-control rounded-0'} id={'orderLevel'} value={order && order.orderLevel} onChange={(e) => onChangeHandler(e)}>\r\n                                <option value='' >Select</option>\r\n                                {arr.map(item => <option value={item.key}>{item.value}</option>)}\r\n                            </select></div> <div className={'col-md-2'}>\r\n                                <button className={'btn btn-danger btn-sm rounded-0'} onClick={() => updateOrderStatus()}>Save</button></div>\r\n                        </div>\r\n                        : <div></div>}\r\n                    <br />\r\n                    <div className={'row'}>\r\n                        <div className={'col-md-6'}>\r\n                            <h4>User Information</h4><hr />\r\n                            <ul>\r\n                                <li><strong>Name:</strong> {props.user && props.user.user_name}</li>\r\n                                <li><strong>Email :</strong>{props.user && props.user.email}</li>\r\n                            </ul>\r\n                            <h4>Order Details</h4><hr />\r\n                            <ul>\r\n                                <li><strong>Priority:</strong> {order && order.priority}</li>\r\n                                <li><strong>Total Amount :</strong>{order && order.totalAmount}</li>\r\n                                <li><strong>Payment Method :</strong>{order && order.paymentMethod}</li>\r\n                                <li><strong>Payment Status :</strong>{order && order.paymentStatus ? 'Done' : 'In Complete'}</li>\r\n                                <li><strong>Order Process :</strong>{order && arr.filter(item => item.key === order.orderLevel).map(item => item.value)[0]}</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div className={'col-md-6'}>\r\n                            <h4>Address Information</h4><hr />\r\n                            <ul>\r\n                                <li><strong>Address 1:</strong> {address && address.address1}</li>\r\n                                <li><strong>Address 2 :</strong>{address && address.address2}</li>\r\n                                <li><strong>City :</strong>{address && address.city} Pincode:{address && address.pincode} </li>\r\n                                <li><strong>State :</strong>{address && address.state}</li>\r\n                                <li><strong>Land Mark :</strong>{address && address.landMark}</li>\r\n                                <li><strong>Phone No :</strong>{address && address.phoneNo}</li>\r\n                                <li><strong>Address Type :</strong>{address && address.addressType}</li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\"><div className={'col-md-6'}><Review cart={cart} /><br /></div>\r\n                        <div className={'col-md-6'}> <br /><br /><br /><ul>\r\n                            <li><strong>Total Quatity :</strong>{cart && cart.totalQty}</li>\r\n                            <li><strong>Sub Total:</strong>Rs. {cart && cart.totalPrice}</li>\r\n                            <li><strong>Delivery Charges :</strong>{'Free'}</li>\r\n                            <li><strong>Estimated tax :</strong>Rs. {calcPrice(cart.totalPrice).taxes}</li>\r\n                            <li><strong>Total :</strong>Rs. {calcPrice(cart.totalPrice).total}</li>\r\n                        </ul></div>\r\n                    </div>\r\n                    <div className={'row '}>\r\n                        <div className={'col-6 '}>\r\n                            <textarea className={'form-control rounded-0'} value={comment} onChange={(e) => setComment(e.target.value)} />\r\n                            <button className={'btn btn-danger rounded-0 btn-sm'} onClick={() => postComment()}>Post</button>\r\n                        </div>\r\n                        <div className=\"col-6 pull-right\">\r\n                            <button className={'btn btn-danger rounded-0 btn-sm'} onClick={() => cancelOrder()}>Cancel Order</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        track_order_loading: state.TrackOrdersReducer.getIn(['track_order', 'loading'], true),\r\n        track_order: state.TrackOrdersReducer.getIn(['track_order'], Map),\r\n        address_by_id_loading: state.TrackOrdersReducer.getIn(['address_by_id', 'loading'], true),\r\n        address_by_id: state.TrackOrdersReducer.getIn(['address_by_id'], Map),\r\n        cart_loading: state.TrackOrdersReducer.getIn(['cart_by_id', 'loading'], true),\r\n        cart: state.TrackOrdersReducer.getIn(['cart_by_id'], Map),\r\n        update_order_loading: state.TrackOrdersReducer.getIn(['update_order', 'loading'], true),\r\n        update_order: state.TrackOrdersReducer.getIn(['update_order'], Map),\r\n        user: state.token.user_token\r\n    }\r\n}\r\nexport default connect(mapStateToProps, { trackSelectedOrder, getSelectedOrderAddress, getCartById, updateOrder })(OrderInfo)"]},"metadata":{},"sourceType":"module"}